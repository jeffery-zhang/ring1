# ring1-v0.4.0 实施计划

- 设计文档: `memory/designs/ring1-v0.4.0.md`
- 创建时间: 02-25-13-53-23
- 当前状态: 未开始开发(仅完成规划)

## 模块 A: 需求冻结

- [x] A1. 确认默认 agents 扩展为 `claude,codex,opencode`
- [ ] A2. 确认非 TTY 缺参时策略(回退默认值 or 直接报错)
- [ ] A3. 固化交互文案与默认选中项规则

## 模块 B: Agent 元数据与路径扩展

- [ ] B1. 抽离 `AGENT_DEFINITIONS` 到 `src/agent-definitions.ts`
- [ ] B2. 扩展 Agent 类型/列表为 `claude,codex,opencode`
- [ ] B3. 增加 opencode 路径片段 `.config/opencode/AGENTS.md`
- [ ] B4. 校验 Windows / Unix-like 目标路径拼接结果

## 模块 C: 交互模块实现

- [ ] C1. 引入交互库并封装 `src/prompts.ts`
- [ ] C2. 实现 agents 多选交互(空格勾选、回车提交)
- [ ] C3. 实现 mode 单选交互(link/copy)
- [ ] C4. 实现非交互环境兜底分支

## 模块 D: CLI 编排与执行接入

- [ ] D1. 在 `sync` 命令中接入“参数优先，缺参交互”流程
- [ ] D2. 保持原有参数校验、错误输出与退出码语义
- [ ] D3. 保持备份、同步、Windows 自动降级逻辑不回归

## 模块 E: 验证与文档

- [ ] E1. 验证无参数启动的交互流程(agents + mode)
- [ ] E2. 验证带参数启动时不进入交互流程
- [ ] E3. 验证 opencode 写入路径与备份行为
- [ ] E4. 更新 README 使用说明与示例
- [ ] E5. 若出现问题，记录到 `memory/validations`
